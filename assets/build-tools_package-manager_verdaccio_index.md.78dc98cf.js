import{_ as s,c as a,o as n,d as l}from"./app.80f08bd9.js";const e="/fe-handbook/assets/image-20221029110116146.0db43401.png",p="/fe-handbook/assets/image-20221029110155481.796deef3.png",o="/fe-handbook/assets/image-20221029112202611.d1a2927e.png",t="/fe-handbook/assets/image-20221029114819367.54fb4e79.png",c="/fe-handbook/assets/image-20221029121710904.4f018831.png",b=JSON.parse('{"title":"Verdaccio","description":"","frontmatter":{},"headers":[{"level":2,"title":"QuickStart","slug":"quickstart","link":"#quickstart","children":[]},{"level":2,"title":"File Location","slug":"file-location","link":"#file-location","children":[]},{"level":2,"title":"Docker image","slug":"docker-image","link":"#docker-image","children":[]},{"level":2,"title":"Custom Registry","slug":"custom-registry","link":"#custom-registry","children":[{"level":3,"title":"User","slug":"user","link":"#user","children":[]},{"level":3,"title":"Project","slug":"project","link":"#project","children":[]},{"level":3,"title":"CLI","slug":"cli","link":"#cli","children":[]}]},{"level":2,"title":"Login & Publish","slug":"login-publish","link":"#login-publish","children":[{"level":3,"title":"adduser","slug":"adduser","link":"#adduser","children":[]},{"level":3,"title":"prevent your package from being published in other registries","slug":"prevent-your-package-from-being-published-in-other-registries","link":"#prevent-your-package-from-being-published-in-other-registries","children":[]}]},{"level":2,"title":"unpublish","slug":"unpublish","link":"#unpublish","children":[]}],"relativePath":"build-tools/package-manager/verdaccio/index.md","lastUpdated":1676714344000}'),r={name:"build-tools/package-manager/verdaccio/index.md"},i=l(`<h1 id="verdaccio" tabindex="-1"><a href="https://verdaccio.org/" target="_blank" rel="noreferrer">Verdaccio</a> <a class="header-anchor" href="#verdaccio" aria-hidden="true">#</a></h1><p>A private npm registry.</p><h2 id="quickstart" tabindex="-1">QuickStart <a class="header-anchor" href="#quickstart" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># install</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio</span></span>
<span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># run</span></span>
<span class="line"><span style="color:#FFCB6B;">verdaccio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 通过pm2启动守护进程，可以在后台运行</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pm2</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio</span></span>
<span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">list</span></span>
<span class="line"></span></code></pre></div><p><img src="`+e+'" alt="image-20221029110116146"></p><p><img src="'+p+`" alt="image-20221029110155481"></p><h2 id="file-location" tabindex="-1">File Location <a class="header-anchor" href="#file-location" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">\\AppData\\Roaming\\verdaccio\\storage</span></span>
<span class="line"></span></code></pre></div><p><img src="`+o+`" alt="image-20221029112202611"></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">~</span><span style="color:#A6ACCD;">\\AppData\\Roaming\\verdaccio\\config.yaml</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-image" tabindex="-1">Docker image <a class="header-anchor" href="#docker-image" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4873</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">4873</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verdaccio/verdaccio</span></span>
<span class="line"></span></code></pre></div><h2 id="custom-registry" tabindex="-1">Custom Registry <a class="header-anchor" href="#custom-registry" aria-hidden="true">#</a></h2><h3 id="user" tabindex="-1">User <a class="header-anchor" href="#user" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 会在用户目录生成 \`.npmrc\` 文件</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:</span><span style="color:#F78C6C;">4873</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 会在用户目录生成 \`.yarnrc\` 文件</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:</span><span style="color:#F78C6C;">4873</span></span>
<span class="line"></span></code></pre></div><p><code>npm</code> <code>yarn</code> <code>pnpm</code> 都能识别 <code>.npmrc</code></p><h4 id="npmrc" tabindex="-1">.npmrc <a class="header-anchor" href="#npmrc" aria-hidden="true">#</a></h4><div class="language-.npmrc"><button title="Copy Code" class="copy"></button><span class="lang">.npmrc</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">registry=http://localhost:4873/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="yarnrc" tabindex="-1">.yarnrc <a class="header-anchor" href="#yarnrc" aria-hidden="true">#</a></h4><div class="language-.yarnrc"><button title="Copy Code" class="copy"></button><span class="lang">.yarnrc</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">registry &quot;http://localhost:4873&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="project" tabindex="-1">Project <a class="header-anchor" href="#project" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 会在项目根目录生成 \`.npmrc\` 文件</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:</span><span style="color:#F78C6C;">4873</span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--location</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">project</span></span>
<span class="line"></span></code></pre></div><h3 id="cli" tabindex="-1">CLI <a class="header-anchor" href="#cli" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lodash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:</span><span style="color:#F78C6C;">4873</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dayjs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:</span><span style="color:#F78C6C;">4873</span></span>
<span class="line"></span></code></pre></div><h2 id="login-publish" tabindex="-1">Login &amp; Publish <a class="header-anchor" href="#login-publish" aria-hidden="true">#</a></h2><p>代码：<a href="https://github.com/zlx01/ok-verdaccio" target="_blank" rel="noreferrer">https://github.com/zlx01/ok-verdaccio</a></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 1. Login</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">adduser</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:</span><span style="color:#F78C6C;">4873</span><span style="color:#C3E88D;">/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">whoami</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2. Publish</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:</span><span style="color:#F78C6C;">4873</span><span style="color:#C3E88D;">/</span></span>
<span class="line"></span></code></pre></div><h3 id="adduser" tabindex="-1">adduser <a class="header-anchor" href="#adduser" aria-hidden="true">#</a></h3><p><img src="`+t+`" alt="image-20221029114819367"></p><h3 id="prevent-your-package-from-being-published-in-other-registries" tabindex="-1">prevent your package from being published in other registries <a class="header-anchor" href="#prevent-your-package-from-being-published-in-other-registries" aria-hidden="true">#</a></h3><p>在 <code>package.json</code> 配置</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">publishConfig</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">registry</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:4873</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>直接publish</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span></span>
<span class="line"></span></code></pre></div><p><img src="`+c+`" alt="image-20221029121710904"></p><p>两个问题：</p><ol><li>README不是跟随版本的，展示最新的。</li><li>README中的图片引用失败。</li></ol><h2 id="unpublish" tabindex="-1">unpublish <a class="header-anchor" href="#unpublish" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unpublish</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ok-verdaccio@1.0.5</span></span>
<span class="line"></span></code></pre></div>`,39),C=[i];function y(d,h,D,g,u,A){return n(),a("div",null,C)}const F=s(r,[["render",y]]);export{b as __pageData,F as default};
