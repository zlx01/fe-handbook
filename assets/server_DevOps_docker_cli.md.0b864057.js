import{_ as s,c as a,o as n,d as l}from"./app.80f08bd9.js";const p="/fe-handbook/assets/373ddf1958db4dadbdf8696fde3e6ce1.623681e2.png",o="/fe-handbook/assets/20201004201721322.13083bb0.png",e="/fe-handbook/assets/2020100420175755.6b894a18.png",t="/fe-handbook/assets/8b4a6933ba414db5864ea2c311c6175f.49d76e00.png",B=JSON.parse('{"title":"Docker Command","description":"","frontmatter":{},"headers":[{"level":3,"title":"小试牛刀","slug":"小试牛刀","link":"#小试牛刀","children":[]},{"level":3,"title":"镜像操作","slug":"镜像操作","link":"#镜像操作","children":[]},{"level":3,"title":"容器操作","slug":"容器操作","link":"#容器操作","children":[]}],"relativePath":"server/DevOps/docker/cli.md","lastUpdated":1676714344000}'),c={name:"server/DevOps/docker/cli.md"},r=l(`<h1 id="docker-command" tabindex="-1">Docker Command <a class="header-anchor" href="#docker-command" aria-hidden="true">#</a></h1><h3 id="小试牛刀" tabindex="-1">小试牛刀 <a class="header-anchor" href="#小试牛刀" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 查看docker版本</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看帮助</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 永远的Hello World</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hello-world</span></span>
<span class="line"></span></code></pre></div><p><img src="`+p+`" alt="在这里插入图片描述"></p><h3 id="镜像操作" tabindex="-1">镜像操作 <a class="header-anchor" href="#镜像操作" aria-hidden="true">#</a></h3><h4 id="查看本地已有的镜像" tabindex="-1">查看本地已有的镜像 <a class="header-anchor" href="#查看本地已有的镜像" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">images</span></span>
<span class="line"><span style="color:#FFCB6B;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:列出本地所有的镜像（含中间映像层）</span></span>
<span class="line"><span style="color:#FFCB6B;">-q</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:只显示镜像ID</span></span>
<span class="line"><span style="color:#FFCB6B;">--digests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:显示镜像的摘要信息</span></span>
<span class="line"><span style="color:#FFCB6B;">--no-trunc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:显示完整的镜像信息</span></span>
<span class="line"></span></code></pre></div><h4 id="查找镜像" tabindex="-1">查找镜像 <a class="header-anchor" href="#查找镜像" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 没有指定TAG时，默认为latest标签</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果获取到的镜像比之前拉取的新，原先的镜像tag会变成none</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NAME:[TAG]</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">--no-trunc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">显示完整的镜像描述</span></span>
<span class="line"><span style="color:#FFCB6B;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">列出收藏数不小于指定值的镜像。</span></span>
<span class="line"><span style="color:#FFCB6B;">--automated</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">只列出</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">automated</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build类型的镜像</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># for example</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span></code></pre></div><h4 id="拉取镜像" tabindex="-1">拉取镜像 <a class="header-anchor" href="#拉取镜像" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NAME:[TAG]</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">拉取mysql镜像，标签默认latest</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:tag	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">拉取指定tag的mysql镜像</span></span>
<span class="line"></span></code></pre></div><h4 id="删除镜像" tabindex="-1">删除镜像 <a class="header-anchor" href="#删除镜像" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">image-id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">通过镜像ID删除镜像，这种方式失败的话用镜像标签</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:tag</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 通过镜像标签删除镜像</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 如果一个镜像对应了多个tag，只有当最后一个tag被删除时，镜像才被真正删除</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像ID/镜像名</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名1:TAG</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名2:TAG</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> images -qa</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;"># 删除全部</span></span>
<span class="line"></span></code></pre></div><h4 id="更改镜像名和标签" tabindex="-1">更改镜像名和标签 <a class="header-anchor" href="#更改镜像名和标签" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NAME[:tag]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NEW_NAME[:tag]</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像id</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">NEW_NAME[:tag]</span></span>
<span class="line"></span></code></pre></div><h4 id="查看镜像详情" tabindex="-1">查看镜像详情 <a class="header-anchor" href="#查看镜像详情" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inspect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 查看镜像详细信息</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">history</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">imag</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 显示镜像的构建历史，即Dockerfile的执行过程</span></span>
<span class="line"></span></code></pre></div><h4 id="提交镜像" tabindex="-1">提交镜像 <a class="header-anchor" href="#提交镜像" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commit提交容器副本使之成为一个新的镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m=“提交的描述信息”</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a=“作者”</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器ID</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">要创建的目标镜像名:[标签名]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p=true</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">提交时暂停容器运行</span></span>
<span class="line"></span></code></pre></div><h4 id="导入导出镜像" tabindex="-1">导入导出镜像 <a class="header-anchor" href="#导入导出镜像" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">save</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.tar</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">容器:标签或容器id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">保存容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">load</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.tar</span><span style="color:#A6ACCD;"> 	</span><span style="color:#676E95;font-style:italic;"># 载入容器</span></span>
<span class="line"></span></code></pre></div><h4 id="将本地的镜像上传远程镜像仓库" tabindex="-1">将本地的镜像上传远程镜像仓库 <a class="header-anchor" href="#将本地的镜像上传远程镜像仓库" aria-hidden="true">#</a></h4><ul><li>需要先登录Docker远程镜像仓库，默认登录官方仓库：DockerHub</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">login</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 然后输入账号密码</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名:标签</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logout</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 登出</span></span>
<span class="line"></span></code></pre></div><ul><li>也可以使用阿里云镜像服务 <img src="`+o+'" alt="在这里插入图片描述"><img src="'+e+`" alt="在这里插入图片描述"></li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 推送镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">login</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--username=xxx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry.cn-shenzhen.aliyuncs.com</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tag</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">ImageId</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry.cn-shenzhen.aliyuncs.com/xxx/yyy:[镜像版本号]</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry.cn-shenzhen.aliyuncs.com/xxx/yyy:[镜像版本号]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 拉取镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry.cn-shenzhen.aliyuncs.com/xxx/yyy:[镜像版本号]</span></span>
<span class="line"></span></code></pre></div><h3 id="容器操作" tabindex="-1">容器操作 <a class="header-anchor" href="#容器操作" aria-hidden="true">#</a></h3><h4 id="docker-run" tabindex="-1">docker run <a class="header-anchor" href="#docker-run" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">image-name</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># --name container-name，为容器起个名字，必须唯一</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -i 打开容器的标准输入</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -t 为容器分配一个命令行虚拟终端，centos默认/bin/bash</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -d 后台运行</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -p 主机端口:容器端口</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -P Publish all exposed ports to random ports</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># --rm 容器退出之后销毁</span></span>
<span class="line"></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 服务类后台运行</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-P</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 工具类打开shell窗口</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">busybox</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># exit之后容器还在</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">alpine</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># exit之后容器销毁</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">alpine</span></span>
<span class="line"></span></code></pre></div><p><img src="`+t+`" alt="在这里插入图片描述"></p><h4 id="基本命令" tabindex="-1">基本命令 <a class="header-anchor" href="#基本命令" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看正在运行的容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 查看所有容器，包括运行和停止</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-name/container-id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">启动一个已停止的容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-name/container-id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">停止正在运行的容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-name/container-id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">重启指定容器</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pause</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-id</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 处于暂停状态的容器不会占用CPU资源</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unpause</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-id</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kill</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-name/container-id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">强制停止指定容器</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">删除指定容器，必须先停止才能删除，-f可以强制删除</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> ps -aq -f status=exited</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rename</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-id</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">new-container-name	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器重命名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">top</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器ID	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看容器内运行的进程</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inspect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器ID	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看容器内部细节</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-name/container-id	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看容器日志</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--tail</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器ID</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -t 是加入时间戳</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># -f 跟随最新的日志打印</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># --tail 数字 显示最后多少条</span></span>
<span class="line"></span></code></pre></div><h4 id="进入容器" tabindex="-1">进入容器 <a class="header-anchor" href="#进入容器" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 重新进入容器启动命令的终端</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 当多个窗口同时使用该命令进入该容器时，所有的窗口都会同步显示。如果有一个窗口阻塞了，那么其他窗口也无法再进行操作。</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attach</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重新正在后台运行的容器，并打开新的终端（推荐）</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container-id</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span></code></pre></div><h4 id="退出容器" tabindex="-1">退出容器 <a class="header-anchor" href="#退出容器" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;"># 容器停止退出</span></span>
<span class="line"><span style="color:#FFCB6B;">Ctrl+P</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Ctrl+Q	#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器不停止退出</span></span>
<span class="line"></span></code></pre></div><h4 id="容器和主机之间复制文件" tabindex="-1">容器和主机之间复制文件 <a class="header-anchor" href="#容器和主机之间复制文件" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Usage:</span><span style="color:#A6ACCD;">	</span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">OPTIONS</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CONTAINER:SRC_PATH</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">DEST_PATH</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">OPTIONS</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SRC_PATH</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CONTAINER:DEST_PATH</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Copy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">files/folders</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">local</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">filesystem</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Use</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">read</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">archive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdin</span></span>
<span class="line"><span style="color:#FFCB6B;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">extract</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">directory</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">destination</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container.</span></span>
<span class="line"><span style="color:#FFCB6B;">Use</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">destination</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stream</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">archive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span></span>
<span class="line"><span style="color:#FFCB6B;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Options:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">-a,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--archive</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">Archive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mode</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">copy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uid/gid</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">information</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">-L,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--follow-link</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">Always</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">follow</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">symbol</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">link</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SRC_PATH</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="导入导出容器快照" tabindex="-1">导入导出容器快照 <a class="header-anchor" href="#导入导出容器快照" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CONTAINER</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ID</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xxx.tar</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker/ubuntu.tar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test/ubuntu:v1</span></span>
<span class="line"></span></code></pre></div><h4 id="容器数据卷" tabindex="-1">容器数据卷 <a class="header-anchor" href="#容器数据卷" aria-hidden="true">#</a></h4><ul><li>容器数据持久化</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 两个目录如果不存在，会自动创建</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/宿主机绝对路径目录:/容器内目录</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 两个目录的数据改动会实时同步</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 容器退出后，主机修改的数据会在容器重新启动后同步</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看数据卷是否挂载成功</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inspect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器ID</span></span>
<span class="line"></span></code></pre></div><ul><li>容器间传递共享 --volumes-from</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dc02</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--volumes-from</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dc01</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lee/centosfromfile</span></span>
<span class="line"></span></code></pre></div>`,46),C=[r];function y(D,i,A,d,E,h){return n(),a("div",null,C)}const u=s(c,[["render",y]]);export{B as __pageData,u as default};
