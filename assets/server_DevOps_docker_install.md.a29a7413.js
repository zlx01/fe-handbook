import{_ as s,c as a,o as n,d as l}from"./app.a4863d7a.js";const o="/fe-handbook/assets/20201003225316116.7a87b522.png",A=JSON.parse('{"title":"安装 Docker","description":"","frontmatter":{},"headers":[{"level":2,"title":"Windows or Mac","slug":"windows-or-mac","link":"#windows-or-mac","children":[]},{"level":2,"title":"Linux下安装Docker CE","slug":"linux下安装docker-ce","link":"#linux下安装docker-ce","children":[{"level":3,"title":"启动docker","slug":"启动docker","link":"#启动docker","children":[]},{"level":3,"title":"将Docker服务设为开机启动","slug":"将docker服务设为开机启动","link":"#将docker服务设为开机启动","children":[]},{"level":3,"title":"停止docker","slug":"停止docker","link":"#停止docker","children":[]},{"level":3,"title":"免root执行","slug":"免root执行","link":"#免root执行","children":[]},{"level":3,"title":"查看docker服务状态","slug":"查看docker服务状态","link":"#查看docker服务状态","children":[]}]}],"relativePath":"server/DevOps/docker/install.md","lastUpdated":1676216745000}'),e={name:"server/DevOps/docker/install.md"},p=l(`<h1 id="安装-docker" tabindex="-1">安装 Docker <a class="header-anchor" href="#安装-docker" aria-hidden="true">#</a></h1><h2 id="windows-or-mac" tabindex="-1">Windows or Mac <a class="header-anchor" href="#windows-or-mac" aria-hidden="true">#</a></h2><p>直接安装 Docker Desktop（同时也会安装 Docker Compose）</p><h2 id="linux下安装docker-ce" tabindex="-1">Linux下安装Docker CE <a class="header-anchor" href="#linux下安装docker-ce" aria-hidden="true">#</a></h2><ul><li>参考<a href="https://docs.docker.com/engine/install/" target="_blank" rel="noreferrer">官方文档</a></li><li>参见<a href="https://yq.aliyun.com/articles/110806" target="_blank" rel="noreferrer">阿里云的文档</a></li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># step 1: 安装必要的一些系统工具</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-transport-https</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ca-certificates</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">software-properties-common</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># step 2: 安装GPG证书</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-fsSL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Step 3: 写入软件源信息</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add-apt-repository</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">lsb_release</span><span style="color:#C3E88D;"> -cs</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> stable</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Step 4: 更新并安装 Docker-CE</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span></span>
<span class="line"></span></code></pre></div><ul><li>配置阿里云加速镜像 <img src="`+o+`" alt="在这里插入图片描述"></li></ul><h3 id="启动docker" tabindex="-1">启动docker <a class="header-anchor" href="#启动docker" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>
<span class="line"></span></code></pre></div><h3 id="将docker服务设为开机启动" tabindex="-1">将Docker服务设为开机启动 <a class="header-anchor" href="#将docker服务设为开机启动" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>
<span class="line"></span></code></pre></div><h3 id="停止docker" tabindex="-1">停止docker <a class="header-anchor" href="#停止docker" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>
<span class="line"></span></code></pre></div><h3 id="免root执行" tabindex="-1">免root执行 <a class="header-anchor" href="#免root执行" aria-hidden="true">#</a></h3><ul><li>问题</li></ul><blockquote><p>直接执行docker命令会遇到权限问题， 原因是/var/run/docker.sock文件，除root用户，只有docker组用户才可读写</p><p>#ls -l /var/run/docker.sock srw-rw---- 1 root docker 0 juin 20 11:45 /var/run/docker.sock</p></blockquote><ul><li>解决方法</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">groupadd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;">#添加docker用户组</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> $USER </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;">#将登陆用户加入到docker用户组中</span></span>
<span class="line"><span style="color:#FFCB6B;">newgrp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;">#更新用户组</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 重启docker服务</span></span>
<span class="line"></span></code></pre></div><h3 id="查看docker服务状态" tabindex="-1">查看docker服务状态 <a class="header-anchor" href="#查看docker服务状态" aria-hidden="true">#</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>
<span class="line"></span></code></pre></div>`,20),t=[p];function c(r,i,d,C,y,D){return n(),a("div",null,t)}const u=s(e,[["render",c]]);export{A as __pageData,u as default};
