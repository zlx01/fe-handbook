import{_ as a,c as i,o as n,ag as t}from"./chunks/framework.C86mscM5.js";const e="/fe-handbook/assets/image-20221029110116146.D6JPTrNd.png",h="/fe-handbook/assets/image-20221029110155481.CRSnLyz8.png",l="/fe-handbook/assets/image-20221029112202611.BC6UwZ04.png",p="/fe-handbook/assets/image-20221029114819367.BagXJBJl.png",k="/fe-handbook/assets/image-20221029121710904.Ca3E-sh2.png",b=JSON.parse('{"title":"Verdaccio","description":"","frontmatter":{},"headers":[],"relativePath":"build-tools/package-manager/verdaccio/index.md","filePath":"build-tools/package-manager/verdaccio/index.md","lastUpdated":1744516180000}'),r={name:"build-tools/package-manager/verdaccio/index.md"};function d(o,s,c,g,F,y){return n(),i("div",null,s[0]||(s[0]=[t(`<h1 id="verdaccio" tabindex="-1"><a href="https://verdaccio.org/" target="_blank" rel="nofollow noopener noreferrer">Verdaccio</a> <a class="header-anchor" href="#verdaccio" aria-label="Permalink to &quot;[Verdaccio](https://verdaccio.org/)&quot;">​</a></h1><p>A private npm registry.</p><h2 id="quickstart" tabindex="-1">QuickStart <a class="header-anchor" href="#quickstart" aria-label="Permalink to &quot;QuickStart&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verdaccio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verdaccio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verdaccio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># run</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verdaccio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 通过pm2启动守护进程，可以在后台运行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pm2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verdaccio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span></code></pre></div><p><img src="`+e+'" alt="image-20221029110116146"></p><p><img src="'+h+'" alt="image-20221029110155481"></p><h2 id="file-location" tabindex="-1">File Location <a class="header-anchor" href="#file-location" aria-label="Permalink to &quot;File Location&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ppData</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\R</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oaming</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">erdaccio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torage</span></span></code></pre></div><p><img src="'+l+`" alt="image-20221029112202611"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ppData</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\R</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oaming</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">erdaccio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">onfig.yaml</span></span></code></pre></div><h2 id="docker-image" tabindex="-1">Docker image <a class="header-anchor" href="#docker-image" aria-label="Permalink to &quot;Docker image&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verdaccio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4873:4873</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verdaccio/verdaccio</span></span></code></pre></div><h2 id="custom-registry" tabindex="-1">Custom Registry <a class="header-anchor" href="#custom-registry" aria-label="Permalink to &quot;Custom Registry&quot;">​</a></h2><h3 id="user" tabindex="-1">User <a class="header-anchor" href="#user" aria-label="Permalink to &quot;User&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 会在用户目录生成 \`.npmrc\` 文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:4873</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 会在用户目录生成 \`.yarnrc\` 文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:4873</span></span></code></pre></div><p><code>npm</code> <code>yarn</code> <code>pnpm</code> 都能识别 <code>.npmrc</code></p><h4 id="npmrc" tabindex="-1">.npmrc <a class="header-anchor" href="#npmrc" aria-label="Permalink to &quot;.npmrc&quot;">​</a></h4><div class="language-.npmrc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">.npmrc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>registry=http://localhost:4873/</span></span></code></pre></div><h4 id="yarnrc" tabindex="-1">.yarnrc <a class="header-anchor" href="#yarnrc" aria-label="Permalink to &quot;.yarnrc&quot;">​</a></h4><div class="language-.yarnrc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">.yarnrc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>registry &quot;http://localhost:4873&quot;</span></span></code></pre></div><h3 id="project" tabindex="-1">Project <a class="header-anchor" href="#project" aria-label="Permalink to &quot;Project&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 会在项目根目录生成 \`.npmrc\` 文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:4873/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> project</span></span></code></pre></div><h3 id="cli" tabindex="-1">CLI <a class="header-anchor" href="#cli" aria-label="Permalink to &quot;CLI&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lodash</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:4873</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dayjs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:4873</span></span></code></pre></div><h2 id="login-publish" tabindex="-1">Login &amp; Publish <a class="header-anchor" href="#login-publish" aria-label="Permalink to &quot;Login &amp; Publish&quot;">​</a></h2><p>代码：<a href="https://github.com/zlx01/ok-verdaccio" target="_blank" rel="nofollow noopener noreferrer">https://github.com/zlx01/ok-verdaccio</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Login</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> adduser</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:4873/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> whoami</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Publish</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --registry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:4873/</span></span></code></pre></div><h3 id="adduser" tabindex="-1">adduser <a class="header-anchor" href="#adduser" aria-label="Permalink to &quot;adduser&quot;">​</a></h3><p><img src="`+p+`" alt="image-20221029114819367"></p><h3 id="prevent-your-package-from-being-published-in-other-registries" tabindex="-1">prevent your package from being published in other registries <a class="header-anchor" href="#prevent-your-package-from-being-published-in-other-registries" aria-label="Permalink to &quot;prevent your package from being published in other registries&quot;">​</a></h3><p>在 <code>package.json</code> 配置</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;publishConfig&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;registry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:4873&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>直接publish</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> publish</span></span></code></pre></div><p><img src="`+k+'" alt="image-20221029121710904"></p><p>两个问题：</p><ol><li>README不是跟随版本的，展示最新的。</li><li>README中的图片引用失败。</li></ol><h2 id="unpublish" tabindex="-1">unpublish <a class="header-anchor" href="#unpublish" aria-label="Permalink to &quot;unpublish&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unpublish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ok-verdaccio@1.0.5</span></span></code></pre></div>',39)]))}const C=a(r,[["render",d]]);export{b as __pageData,C as default};
